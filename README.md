# Assignment

## Table of Contents
* [Requirements](##requirements)
* [Initialization](##initialization)
* [Setup](##setup)
* [Supplement](##supplement)

## Requirements
- Docker 19.x

If you run the project locally, the followings are required.
- Ruby 3.0.0
- Bundler 2.1.x
- Node.js 14.15.1
- Yarn 1.22.x
- MySQL 8.0.x

## Initialization
After exporting project from iCode, initialize the project. First, create your development environment.
```bash
# docker env
docker-compose build

# local env
bundle install && yarn install
```

Run ` EDITOR="vi" bundle exec rails credentials:edit ` and enter the following test tokens.
```
secret_key_base: "Please fill the generated key"
aws:
  access_key_id: "Please fill access key after you get an AWS account"
  secret_access_key: "Please fill secret key after you get an AWS account"
stripe:
  secret_key: "sk_test_pfkiZJB75Yfc2SJLXb9QXxtO"
  public_key: "pk_test_I3luumw3YWcV9oHxLFeM3eU1"
```

Run `cp env.example .env` and open `.env` file to edit environment variables.

Finally run the setup command.
```
# docker env
docker-compose run web ruby ./bin/initialize

# local env
ruby ./bin/initialize
```

It's all steps to initialize the project. When you finish initialization, please remove this ` ## Initialization ` section from the readme.

## Setup
Setup procedure of development environment.

### Docker environment

Build docker containers
```bash
docker-compose build
```

Setup database
```bash
docker-compose run web bundle exec rake db:create db:migrate db:seed
```

Start the app
```bash
docker-compose up
```

### Local environment

Install dependencies
```bash
## Install gems
bundle install

## Install npm packages
yarn install --check-files
```

Start mysql and setup database
```bash
bin/rake db:create db:migrate db:seed
```

Start the app
```bash
## API server
bin/rails s

## Frontend dev server
bundle exec bin/webpack-dev-server
```

Start console
```bash
bin/rails c
```

## To Run Github Actions Capistrano for Deployment Automation
[Refer Notion Documents in Detail](https://www.notion.so/iruuzainc/Steps-For-Capistrano-Deployment-Automation-Workflow-60ed1631c4aa4c99a3890a9d4dfe09de)


## Supplement
This project was generated by iCode, run by iRuuza Inc.
